<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Color Palette Playground</title>

<style>

/* ===============================
   ROOT + THEMES
=================================*/

:root {
  --bg: #f3f4f6;
  --glass: rgba(255,255,255,0.6);
  --text: #111;
}

body.dark {
  --bg: #111827;
  --glass: rgba(0,0,0,0.4);
  --text: white;
}

body {
  margin:0;
  font-family: system-ui;
  background: var(--bg);
  color: var(--text);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

/* ===============================
   GLASS CONTAINER
=================================*/

.container{
  backdrop-filter: blur(14px);
  background: var(--glass);
  padding:30px;
  border-radius:20px;
  box-shadow:0 10px 30px rgba(0,0,0,0.15);
  text-align:center;
}

/* FLEXBOX ROW */
.palette{
  display:flex;
  gap:20px;
  margin:20px 0;
}

/* COLOR CARD */
.color-box{
  width:140px;
  height:220px;
  border-radius:14px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  cursor:pointer;
  transition:0.3s;
  position:relative;
}

.color-box:hover{
  transform: translateY(-6px) scale(1.02);
}

/* HEX TEXT */
.code{
  background:rgba(255,255,255,0.8);
  padding:10px;
  border-radius:0 0 14px 14px;
  font-weight:bold;
}

/* LOCK ICON */
.lock{
  position:absolute;
  top:10px;
  right:10px;
  background:white;
  border-radius:50%;
  padding:6px;
  cursor:pointer;
}

/* BUTTONS */
button{
  padding:10px 18px;
  margin:5px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}

/* EXPORT BOX */
textarea{
  width:100%;
  height:80px;
  margin-top:10px;
}

.copied{
  position:fixed;
  bottom:30px;
  background:black;
  color:white;
  padding:10px;
  border-radius:6px;
  opacity:0;
  transition:.3s;
}

</style>
</head>

<body>

<div class="container">

<h2>ðŸŽ¨ Color Palette Playground</h2>

<div id="palette" class="palette"></div>

<button onclick="generatePalette()">Randomize Palette</button>
<button onclick="toggleTheme()">Light/Dark</button>
<button onclick="exportPalette()">Export Palette</button>

<textarea id="exportArea" placeholder="Exported palette will appear here..."></textarea>

</div>

<div id="copied" class="copied">Copied!</div>

<script>

/* =====================================
   DATA MODEL (Interview-level structure)
=====================================*/

let paletteData = [];

/* =====================================
   UTIL FUNCTIONS
=====================================*/

// Generate random hex
function randomColor(){
  return "#" + Math.floor(Math.random()*16777215).toString(16).padStart(6,"0");
}

// Copy to clipboard
function copy(text){
  navigator.clipboard.writeText(text);
  showCopied();
}

// Show copied animation
function showCopied(){
  const msg = document.getElementById("copied");
  msg.style.opacity = 1;
  setTimeout(()=> msg.style.opacity = 0,1000);
}

/* =====================================
   RENDER LOGIC (Reusable)
=====================================*/

function renderPalette(){

  const container = document.getElementById("palette");
  container.innerHTML = "";

  paletteData.forEach((item,index)=>{

    const box = document.createElement("div");
    box.className = "color-box";
    box.style.background = item.color;

    // Hover preview brightness effect
    box.addEventListener("mouseenter",()=>{
      box.style.filter="brightness(1.1)";
    });
    box.addEventListener("mouseleave",()=>{
      box.style.filter="none";
    });

    // Copy color
    box.onclick = () => copy(item.color);

    // Lock icon
    const lock = document.createElement("div");
    lock.className = "lock";
    lock.innerHTML = item.locked ? "ðŸ”’" : "ðŸ”“";

    lock.onclick = (e)=>{
      e.stopPropagation();
      paletteData[index].locked = !paletteData[index].locked;
      renderPalette();
    };

    const label = document.createElement("div");
    label.className = "code";
    label.textContent = item.color;

    box.appendChild(lock);
    box.appendChild(label);
    container.appendChild(box);

  });
}

/* =====================================
   MAIN LOGIC
=====================================*/

function generatePalette(){

  // First time setup
  if(paletteData.length === 0){
    for(let i=0;i<5;i++){
      paletteData.push({color:randomColor(),locked:false});
    }
  }else{
    paletteData = paletteData.map(c => {
      if(c.locked) return c;
      return {color:randomColor(),locked:false};
    });
  }

  renderPalette();
}

// Theme toggle
function toggleTheme(){
  document.body.classList.toggle("dark");
}

// Export palette
function exportPalette(){
  const codes = paletteData.map(c=>c.color).join(", ");
  document.getElementById("exportArea").value = codes;
}

/* =====================================
   INIT
=====================================*/

generatePalette();

</script>

</body>
</html>
